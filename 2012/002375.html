<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] How come booting is so blinking slow?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2012/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20How%20come%20booting%20is%20so%20blinking%20slow%3F&In-Reply-To=%3CCA%2BT4wDgUh%3DTCM20XCCzqcDHkY%3DzR-c6XT_dkPT5DRDmkatY%3D3A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002373.html">
   <LINK REL="Next"  HREF="002377.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] How come booting is so blinking slow?</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20How%20come%20booting%20is%20so%20blinking%20slow%3F&In-Reply-To=%3CCA%2BT4wDgUh%3DTCM20XCCzqcDHkY%3DzR-c6XT_dkPT5DRDmkatY%3D3A%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] How come booting is so blinking slow?">kyle.sallee at gmail.com
       </A><BR>
    <I>Sat Aug 18 22:29:42 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002373.html">[Sorcerer-admins] potential re-announcement concerning debugging sysinit and linux version progress.
</A></li>
        <LI>Next message: <A HREF="002377.html">[Sorcerer-admins] How do I get a GUI to run?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2375">[ date ]</a>
              <a href="thread.html#2375">[ thread ]</a>
              <a href="subject.html#2375">[ subject ]</a>
              <a href="author.html#2375">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>That is exactly why.

Ever wonder why NumLock blinks during booting?
It gives indication that an init-script ran
When an init-script runs NumLock LED ignites.
When the init-script completes then NumLock LED extinguishes.
Simple.
But why?
Mainly, so an attached monitor can remain off while booting
and yet the progress can be seen on the keyboard.

Ever seen the CapsLock light blink during boot?
That probably will not happen unless the spell
immune-boot-kick
is installed.
It's init-script executes early during sysinit.
And then it sleeps.

After lazily resting for 30s it wakes and begins work.
It prints a message about sysinit's duration.
It offers to kill running init-scripts if CapsLock is pressed.
Please do not do that.
If the stall continues for minutes and file systems are not fscking
then maybe consider it.
Hopefully, this functionality will be of no use.
And probably few SAs will install it anyway.

CapsLock key is ALREADY useful during booting.
While sysinit and runlevel are executing
then pressing CapsLocks
grants a brief 10s duration for entering the root password
in order to gain a command prompt.
But that functionality only happens between init-scripts runs.
Therefore, a hung init-script prevents the option of a sulogin prompt.

While the kicker can slay init-scripts with signal -9
it will not do so without permission.
Due to the unknown amount of time required for fsck,
for udevd to handle cold plug events,
and perhaps other events that happen during sysinit
nothing can be assumed with certainty.
However, sysinit should complete within a few seconds on most boxes.

So why hang this functionality on CapsLock?
Two reasons exist for that.
First, the state of CapsLock can be easily accessed.
Secondly, why would anyone want to press CapsLock during boot?
ScrollLock and NumLock could have been selected instead of CapsLock.
However, they already have potentially useful functions.

immune-boot-kick only probably will be of no use.
When any runlevel starts
then immune-boot-kick is run with the stop parameter.
Therefore, giving the kill -9 to a process by pressing CapsLock
is only available during sysinit.
This is not undesirable.
Runlevel execution begins after transition to the real root file system
and after gettys have started.
Therefore, login on a getty is already possible
if runlevel execution stalls.

Okay, so this blinking nonsense is nonsense, correct?
If an init-script stalls during sysinit
then the solution is to switch to virtual console 12
login, and kill the hung process.
I agree.
I would do that also.

immune-boot-kick will be installed by default on new boxes
and help give a clue to non-SAs if the box is having problems.
Of course killing a stalled init-script
does not imply that booting will complete successfully.
It might.
Then again maybe the root file system will not mount.

Therefore, this is not a solution for trouble-shooting.
It is not unlike giving a box a virtual kick;
since no sane person would actually kick a rack,
mini-tower, nor drop kick their laptop like a football.
Wow, look how far that went, and nice spiral!

Not everyone appreciates the direction of these types of implementations.
For contrast SAs in the past have stated a preference
for a more complicated, slower init-system
that allows step-by-step interaction.
After making a few attempts at an implementation
I was never satisfied with the performance, functionality, and speed.

This very simple implementation
that incurs only the overhead of running two additional init-scripts
provides functionality that is suitable for the person at the keyboard.
As previously mentioned a SA would investigate a boot problem
by logging into the &quot;Sorcerer's Keep&quot; on virtual console #12.
However, a non SA watching scroll halt for 3m and wondering what to do
will easily welcome the opportunity to press CapsLock
for the opportunity for booting to progress.
Like most Sorcerer implementations
immune-boot-kick achieves an adequate compromise
with consideration to simplicity, speed, and functionality.
</PRE>



<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002373.html">[Sorcerer-admins] potential re-announcement concerning debugging sysinit and linux version progress.
</A></li>
	<LI>Next message: <A HREF="002377.html">[Sorcerer-admins] How do I get a GUI to run?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2375">[ date ]</a>
              <a href="thread.html#2375">[ thread ]</a>
              <a href="subject.html#2375">[ subject ]</a>
              <a href="author.html#2375">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
