<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] changes...
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2012/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20changes...&In-Reply-To=%3CCA%2BT4wDhch8y0ZgoUoZzPTExa7h%3DfDYZ1Q0PWtEfQkBbHnCiS9A%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002408.html">
   <LINK REL="Next"  HREF="002410.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] changes...</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20changes...&In-Reply-To=%3CCA%2BT4wDhch8y0ZgoUoZzPTExa7h%3DfDYZ1Q0PWtEfQkBbHnCiS9A%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] changes...">kyle.sallee at gmail.com
       </A><BR>
    <I>Fri Nov 23 17:27:59 CET 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002408.html">[Sorcerer-admins] changes...
</A></li>
        <LI>Next message: <A HREF="002410.html">[Sorcerer-admins] new I/Rs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2409">[ date ]</a>
              <a href="thread.html#2409">[ thread ]</a>
              <a href="subject.html#2409">[ subject ]</a>
              <a href="author.html#2409">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I have seen some odd error messages
only the last time I tried a paradigm shift.
I did not investigate.

I have not seen any portion of /aux deleted.
However, I will boot the test box now and look.
All the paradigm code tested fine before,
so I am baffled where and when the bugs entered.
However, I have on my todo list today
to retest the paradigm shifting code.
Hopefully, I can find it.
Thanks for the report.
Glad to know the bug is not isolated to only the test box.
I was thinking that it might be due to some weirdness
only on that file system.


On Thu, Nov 22, 2012 at 3:37 AM, Evert Vorster &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">evorster at gmail.com</A>&gt; wrote:

&gt;<i> Also, it deleted everything in /aux/can... why?
</I>&gt;<i>
</I>&gt;<i> -Evert-
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> On 22 November 2012 12:32, Evert Vorster &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">evorster at gmail.com</A>&gt; wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> I tried installing the newer immune-clean spells, and then paradigm
</I>&gt;&gt;<i> shifting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I get a whole screen full of errors like these:
</I>&gt;&gt;<i> ----------------snip-------------------------
</I>&gt;&gt;<i> cp: cannot create hard link
</I>&gt;&gt;<i> '/para/old/201211/aux/new/usr/share/config/kdenlive_wipes.knsrc' to
</I>&gt;&gt;<i> '/aux/new/usr/share/config/kdenlive_wipes.knsrc': Invalid cross-device link
</I>&gt;&gt;<i> ----------------snip-------------------------
</I>&gt;&gt;<i> This may be due to the fact that I have /aux mounted as a separate
</I>&gt;&gt;<i> filesystem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> -Evert-
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On 21 November 2012 21:07, Kyle Sallee &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">kyle.sallee at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are charging forward with the deployment of sorcery-paradigm.
</I>&gt;&gt;&gt;<i> When the paradigm feature is not enabled
</I>&gt;&gt;&gt;<i> then it should perform nearly identical to sorcery-delegate
</I>&gt;&gt;&gt;<i> but with fewer bugs.  :)
</I>&gt;&gt;&gt;<i> Do not enable the paradigm feature unless prepared to be baffled.
</I>&gt;&gt;&gt;<i> The
</I>&gt;&gt;&gt;<i> # a p
</I>&gt;&gt;&gt;<i> command prefix will be useful for paradigm enabled box.
</I>&gt;&gt;&gt;<i> Be sure to read:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # au help paradigm
</I>&gt;&gt;&gt;<i> # au help a
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> if the paradigm feature is enabled.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Spell immune-exam-clean was deprecated.
</I>&gt;&gt;&gt;<i> Spells immune-clean-{archive,ccache,event,failed,source}
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Those 5 spells have been delegated the cleaning duties.
</I>&gt;&gt;&gt;<i> If the SA wants box specific cleaning for the source cache,
</I>&gt;&gt;&gt;<i> yet is satisfied with automatic cleaning of ccache and archive cache
</I>&gt;&gt;&gt;<i> then the SA could omit the election of immune-clean-source.
</I>&gt;&gt;&gt;<i> Simple, yes?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> That way SAs, such as Evert, who prefer
</I>&gt;&gt;&gt;<i> the source cache to not be cleaned
</I>&gt;&gt;&gt;<i> can enable cleaning for other areas
</I>&gt;&gt;&gt;<i> while omitting the installation of immune-clean-source.  :)
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> When the source cache transitioned from
</I>&gt;&gt;&gt;<i> /var/cache/sources/ to /aux/can/source/
</I>&gt;&gt;&gt;<i> A few boxes ate their source tarballs.
</I>&gt;&gt;&gt;<i> Sorry for the inconvenience.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> For the transition to sorcery-delegate and sorcery-paradigm
</I>&gt;&gt;&gt;<i> the source tarballs and ccache tarballs can be reused.
</I>&gt;&gt;&gt;<i> The new directories are:
</I>&gt;&gt;&gt;<i> /aux/can/{source,ccache}/ , respectively.
</I>&gt;&gt;&gt;<i> However, old archives MUST be discarded.
</I>&gt;&gt;&gt;<i> That is because archives for old software
</I>&gt;&gt;&gt;<i> have the installation log locations set to the old location.
</I>&gt;&gt;&gt;<i> If sorcery tries to raise them
</I>&gt;&gt;&gt;<i> then it might loop, maybe infinitely.
</I>&gt;&gt;&gt;<i> So any archives remaining in /var/cache/archive/
</I>&gt;&gt;&gt;<i> can be safely deleted because they have no further use.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Due to a bug
</I>&gt;&gt;&gt;<i> immune-sentinel-resume could drive the utilities harder than intended.
</I>&gt;&gt;&gt;<i> The bug in immune-sentinel-resume will be fixed in the next LAG=0
</I>&gt;&gt;&gt;<i> grimoire.
</I>&gt;&gt;&gt;<i> Due to the heavy reliance upon pgrep
</I>&gt;&gt;&gt;<i> the utilities could berserk slightly while
</I>&gt;&gt;&gt;<i> procps is dispelled.
</I>&gt;&gt;&gt;<i> This was fixed by protecting pgrep from reaping.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> sorcery-delegate and sorcery-paradigm utilities are event driven.
</I>&gt;&gt;&gt;<i> And if an event happens then a utility such as &quot;moil&quot; could be invoked
</I>&gt;&gt;&gt;<i> merely because it has queued content.
</I>&gt;&gt;&gt;<i> However, moil might be waiting for spells to post
</I>&gt;&gt;&gt;<i> be processing a solo spell, or already have plenty to do.
</I>&gt;&gt;&gt;<i> In such a situation moil exits without causing an event.
</I>&gt;&gt;&gt;<i> When a utility is invoked, decides to accomplish nothing and exits
</I>&gt;&gt;&gt;<i> then I call this &quot;venting.&quot;
</I>&gt;&gt;&gt;<i> It vents pressure.
</I>&gt;&gt;&gt;<i> Pressure is created when a utility completes a task
</I>&gt;&gt;&gt;<i> or every 5 minutes.
</I>&gt;&gt;&gt;<i> This ensures that the utilities do not stall.
</I>&gt;&gt;&gt;<i> Berserking is a state when a utility
</I>&gt;&gt;&gt;<i> is invoked more frequently than it can vent pressure.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The purpose of testing hundreds of spells through
</I>&gt;&gt;&gt;<i> sorcery delegate and sorcery paradigm was to spot bugs,
</I>&gt;&gt;&gt;<i> and especially spot bugs that caused berserking.
</I>&gt;&gt;&gt;<i> However, the berserking specific to procps was not
</I>&gt;&gt;&gt;<i> spotted until after procps was tried and the outcome monitored.
</I>&gt;&gt;&gt;<i> This suggests that most, but perhaps not all conditions
</I>&gt;&gt;&gt;<i> or bugs that could cause berserking, have been squished.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Until sorcery-delegate I rarely used pstree.
</I>&gt;&gt;&gt;<i> However, it has since become a powerful tool to spot berserking.
</I>&gt;&gt;&gt;<i> Berserking left unattended might eventually vent over time
</I>&gt;&gt;&gt;<i> or might cause a fork bomb like effect.
</I>&gt;&gt;&gt;<i> So when transitioning to sorcery-delegate and sorcery-paradigm
</I>&gt;&gt;&gt;<i> then checking for berserking might be a good idea
</I>&gt;&gt;&gt;<i> when loadavg becomes excessively high.
</I>&gt;&gt;&gt;<i> For example, 32 load processes suggests berserking.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If a box is berserking then please send to me in an email
</I>&gt;&gt;&gt;<i> the files created by running:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> # pstree &gt; /tmp/pstree.txt
</I>&gt;&gt;&gt;<i> # ps -Af &gt; /tmp/ps.txt
</I>&gt;&gt;&gt;<i> # find /aux/run/queue -type f &gt; /tmp/queue.txt
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If reported with that information
</I>&gt;&gt;&gt;<i> then that aught to reveal a clue that could
</I>&gt;&gt;&gt;<i> be used to recreate the conditions and
</I>&gt;&gt;&gt;<i> then identify the bug or circumvent the condition.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Frankly, I am not expecting any reports.
</I>&gt;&gt;&gt;<i> I did plenty of testing on sorcery.
</I>&gt;&gt;&gt;<i> However, each SA sees something different
</I>&gt;&gt;&gt;<i> because they might be doing something different
</I>&gt;&gt;&gt;<i> and have a different set of spells queued.
</I>&gt;&gt;&gt;<i> Experiences can vary depending upon whether doing
</I>&gt;&gt;&gt;<i> a first time deployment, upgrades, rebuilds,
</I>&gt;&gt;&gt;<i> or individual spell testing.
</I>&gt;&gt;&gt;<i> So I provided the above information so that a SA
</I>&gt;&gt;&gt;<i> will know what to do if berserking happens.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> BTW, if tempted to run pkill
</I>&gt;&gt;&gt;<i> then most of the utilities can be pkilled safely.
</I>&gt;&gt;&gt;<i> However, do not pkill post.
</I>&gt;&gt;&gt;<i> That could create aliens or perhaps cause
</I>&gt;&gt;&gt;<i> important spells to not be installed.
</I>&gt;&gt;&gt;<i> Also please do not power cycle a berserking box.
</I>&gt;&gt;&gt;<i> That also is reckless.
</I>&gt;&gt;&gt;<i> The utilities should be able to resume on reboot
</I>&gt;&gt;&gt;<i> due to the state of the queues.
</I>&gt;&gt;&gt;<i> However, I have done no testing to determine
</I>&gt;&gt;&gt;<i> what happens when power cycling while posting spells.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I am yet again pounding on new I/Rs.
</I>&gt;&gt;&gt;<i> I will be going with a different design
</I>&gt;&gt;&gt;<i> that should provide a faster installation
</I>&gt;&gt;&gt;<i> of the base system.
</I>&gt;&gt;&gt;<i> However, I will be upgrading the
</I>&gt;&gt;&gt;<i> minimum specifications for Sorcerer to 2G.
</I>&gt;&gt;&gt;<i> And if unable to reduce the content of the I/Rs
</I>&gt;&gt;&gt;<i> then perhaps 3G will be required merely for installation
</I>&gt;&gt;&gt;<i> Sorcerer x86_64 multilib.
</I>&gt;&gt;&gt;<i> I am hammering on that yesterday, today, and maybe tomorrow.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sorcerer Sentient installation is changing.
</I>&gt;&gt;&gt;<i> The nearly no questions asked installation method remains.
</I>&gt;&gt;&gt;<i> Speed enhanced installation by installing some software
</I>&gt;&gt;&gt;<i> from downloaded archives is discontinued.
</I>&gt;&gt;&gt;<i> And Sorcerer Sentient will be run
</I>&gt;&gt;&gt;<i> on the same grimoire as Sorcerer.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This address and circumvents some of the problems
</I>&gt;&gt;&gt;<i> that entered into the Sorcerer Sentient installation over time.
</I>&gt;&gt;&gt;<i> Sorcerer Sentient installation will be slower
</I>&gt;&gt;&gt;<i> and perhaps much slower on legacy boxes.
</I>&gt;&gt;&gt;<i> However, this compromise will allow me
</I>&gt;&gt;&gt;<i> to complete I/Rs with less time and effort.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> These compromises might not seem favorable for everyone.
</I>&gt;&gt;&gt;<i> But they help the distro to move forward.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Because of the specific overhead involved in a source based distro,
</I>&gt;&gt;&gt;<i> which is the installation of large software projects such as
</I>&gt;&gt;&gt;<i> gcc, and smaller software projects such as bintuils, make, cmake,
</I>&gt;&gt;&gt;<i> automake, autoconf, libtool, and the inclusion of static link libraries,
</I>&gt;&gt;&gt;<i> header files, pkgconfig files, libtool la files, documentation,
</I>&gt;&gt;&gt;<i> API specific manual pages and more...;
</I>&gt;&gt;&gt;<i> a source based distro such as Sorcerer always begins
</I>&gt;&gt;&gt;<i> with an overwhelming disadvantage when competing
</I>&gt;&gt;&gt;<i> with a pre-compiled binary based distro
</I>&gt;&gt;&gt;<i> and especially those distros with the sole niche
</I>&gt;&gt;&gt;<i> of being a &quot;Live DVD&quot; based distro.
</I>&gt;&gt;&gt;<i> Consequently, a &quot;Live CD&quot; distro must install less
</I>&gt;&gt;&gt;<i> and can install it faster for less downloading
</I>&gt;&gt;&gt;<i> than a &quot;Sorcerer I/R&quot; attempting to provide a &quot;Live CD&quot;
</I>&gt;&gt;&gt;<i> that would exceed 1 gigabyte in size.
</I>&gt;&gt;&gt;<i> Therefore, Sorcerer is not intended to compete in that niche.
</I>&gt;&gt;&gt;<i> The previous implementation of &quot;Sorcerer Sentient&quot;
</I>&gt;&gt;&gt;<i> was a compromise granted to the SAs that begged
</I>&gt;&gt;&gt;<i> for a &quot;Sorcerer Live CD&quot; every year.
</I>&gt;&gt;&gt;<i> However, the best suited distro
</I>&gt;&gt;&gt;<i> for the task of being a &quot;Live CD&quot; distro
</I>&gt;&gt;&gt;<i> will always remain a distro with the sole niche
</I>&gt;&gt;&gt;<i> of being a workstation or server &quot;Live CD&quot; based distro.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Sorry if that explanation was a bit like the cliche,
</I>&gt;&gt;&gt;<i> &quot;beating a dead horse.&quot;
</I>&gt;&gt;&gt;<i> However, I clearly wanted to explicate that
</I>&gt;&gt;&gt;<i> &quot;Sorcerer Sentient&quot; is not an attempt to compete
</I>&gt;&gt;&gt;<i> in the niche of &quot;Live CD&quot; distros.
</I>&gt;&gt;&gt;<i> &quot;Sorcerer Sentient&quot; will become slower to accomplish
</I>&gt;&gt;&gt;<i> and be granted the same probability of encountering error
</I>&gt;&gt;&gt;<i> as expected when deploying &quot;Sorcerer Modern Magic&quot;
</I>&gt;&gt;&gt;<i> with the same loadout of software.
</I>&gt;&gt;&gt;<i> Sorry for any inconvenience this may cause.
</I>&gt;&gt;&gt;<i> However, it will grant me about 2 weeks of productivity
</I>&gt;&gt;&gt;<i> to allocate differently.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &quot;Sorcerer Sentient&quot; boxes will transition
</I>&gt;&gt;&gt;<i> to bouncing and floating upon the choppy waters
</I>&gt;&gt;&gt;<i> of the same uncertain seas of free software
</I>&gt;&gt;&gt;<i> that &quot;Sorcerer Modern Magic&quot; boxes traverse.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;&gt;<i> Sorcerer-admins mailing list
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">Sorcerer-admins at lists.berlios.de</A>
</I>&gt;&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">https://lists.berlios.de/mailman/listinfo/sorcerer-admins</A>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Those who do not understand UNIX are doomed to reinvent it, poorly.
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Those who do not understand UNIX are doomed to reinvent it, poorly.
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Sorcerer-admins mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">Sorcerer-admins at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">https://lists.berlios.de/mailman/listinfo/sorcerer-admins</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/sorcerer-admins/attachments/20121123/c04f69c8/attachment.html">https://lists.berlios.de/pipermail/sorcerer-admins/attachments/20121123/c04f69c8/attachment.html</A>&gt;
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002408.html">[Sorcerer-admins] changes...
</A></li>
	<LI>Next message: <A HREF="002410.html">[Sorcerer-admins] new I/Rs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2409">[ date ]</a>
              <a href="thread.html#2409">[ thread ]</a>
              <a href="subject.html#2409">[ subject ]</a>
              <a href="author.html#2409">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
