<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] rdinit=/bin/bash is a bummer with a USB keyboard
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2012/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20rdinit%3D/bin/bash%20is%20a%20bummer%20with%20a%20USB%20keyboard&In-Reply-To=%3CCA%2BT4wDiArCHG7deqKaF5ZAyQkV7uFGxm31LELtP8N1xuOpfZxQ%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002361.html">
   <LINK REL="Next"  HREF="002363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] rdinit=/bin/bash is a bummer with a USB keyboard</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20rdinit%3D/bin/bash%20is%20a%20bummer%20with%20a%20USB%20keyboard&In-Reply-To=%3CCA%2BT4wDiArCHG7deqKaF5ZAyQkV7uFGxm31LELtP8N1xuOpfZxQ%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] rdinit=/bin/bash is a bummer with a USB keyboard">kyle.sallee at gmail.com
       </A><BR>
    <I>Sat Aug 11 23:44:14 CEST 2012</I>
    <P><UL>
        <LI>Previous message: <A HREF="002361.html">[Sorcerer-admins] (no subject)
</A></li>
        <LI>Next message: <A HREF="002363.html">[Sorcerer-admins] Cosmetic changes...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2362">[ date ]</a>
              <a href="thread.html#2362">[ thread ]</a>
              <a href="subject.html#2362">[ subject ]</a>
              <a href="author.html#2362">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Booting to a bash prompt is a bit of a bummer with a USB keyboard.
Therefore, I adding a few extra lines of code to /init.
When bash is appended to the kernel's parameters
then /init will reload a previously loaded module list and provide a
bash prompt.
On the bright side this will enable the USB keyboard.
On the downside, any module that causes a timeout
could create a minute or longer delay before reaching the bash prompt.

So why do a boot with bash as a kernel parameter?
What if /etc/fstab is incorrect?
Then, boot to a bash prompt
# nano /etc/fstab
# exec /init
And the box boots.

Basically, any error that happens during the sysinit stage of booting
can be preemptively avoided by booting to a bash prompt,
identifying and fixing the problem
and then booting normally by doing
# exec /init

Previously, I always told others,
Just boot using the extra parameter rdinit=/bin/bash
and then make the fixes.
But not until recently did I start using a USB keyboard.
And I almost never encounter boot problems.
Consequently, the problem with a USB keyboard
not responding until after udev handles re-triggered
coldplug events was not something I realized.
And if anyone had reported it
then I probably would have replied,
&quot;Buy and plug in a keyboard was a PS/2 style connector.&quot;

Oddly, non USB keyboards are becoming difficult to purchase.
They might yet go the way of the AT power supply.
Then again, I never did like hooking up an AT power supply to a switch.
With 4 wires, 1 order of connection is correct and 15 are not.  :)
Which one goes where?
That is lore I happily forgot.

The code will arrive in a grimoire tarball in a few days.
After the update a box must do a reboot before
a list of loaded modules is created for the kernel.
Therefore, boxes that almost never reboot
will surely not have the loaded module list
when it might be needed.
Please limit uptimes to reasonable values.  :)
</PRE>


<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002361.html">[Sorcerer-admins] (no subject)
</A></li>
	<LI>Next message: <A HREF="002363.html">[Sorcerer-admins] Cosmetic changes...
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2362">[ date ]</a>
              <a href="thread.html#2362">[ thread ]</a>
              <a href="subject.html#2362">[ subject ]</a>
              <a href="author.html#2362">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
