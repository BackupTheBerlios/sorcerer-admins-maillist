<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] Grimoire Questions
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2010/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20Grimoire%20Questions&In-Reply-To=%3C596b75861002080539y52be0fh8431008aa0287b5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001455.html">
   <LINK REL="Next"  HREF="001457.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] Grimoire Questions</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20Grimoire%20Questions&In-Reply-To=%3C596b75861002080539y52be0fh8431008aa0287b5%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] Grimoire Questions">kyle.sallee at gmail.com
       </A><BR>
    <I>Mon Feb  8 14:39:40 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001455.html">[Sorcerer-admins] Grimoire Questions
</A></li>
        <LI>Next message: <A HREF="001457.html">[Sorcerer-admins] udev does not create sda, sdb and md0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1456">[ date ]</a>
              <a href="thread.html#1456">[ thread ]</a>
              <a href="subject.html#1456">[ subject ]</a>
              <a href="author.html#1456">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>2010/2/8 Dekany Zoltan &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">dekaaa at freemail.hu</A>&gt;:
&gt;<i> Hi!
</I>&gt;<i>
</I>&gt;<i> I just installed Sorcerer onto my laptop.
</I>&gt;<i> The installer aided part was finished successfully,
</I>
That was lucky.
Problems were just resolved where the
/etc/init.d/find_ir script would malfunction
if a floppy drive is present.
But the I/Rs that I uploaded last night should
take care of the problem.
Fortunately, I was able to complete the I/Rs
and have them uploaded long before the &quot;Super Bowl.&quot;
Unfortunately, I fell asleep at half time.
I still do not know which team won.
But the Colts had a strong first half.


&gt;<i> but I am confused a
</I>&gt;<i> little bit about Grimoire and it's internal working.
</I>
The grimoire itself does not actually do anything.
It is easier to imagine it as a recipe book.
If the recipes are good
then cast will be able to bake delicious software.


&gt;<i> I have some questions:
</I>&gt;<i>
</I>&gt;<i> - Since Sorcery is a source based distro, I think it is neccessary to set up
</I>&gt;<i> my processors parameters to get an optimised code. (Like in Gentoo)
</I>&gt;<i> How can I do that?
</I>
Really?
We have not had to do anything like that for a long time.
If you seriously want to set optimizations
for spells to use
than I can explain it to you.
It does not require modification of the spells in the grimoire.
Please just ask about it again.

For now trust that cast will automatically select
optimization that will provide an excellent compromise
between compile speed and runtime performance.
And software that typically can run a CPU core at full bore
will often receive more expensive compile time optimization
than software that would runs lightly.

However, if software must be compiled
without optimization, with debug information, and not stripped
then that requires a custom cpref file, or compiler preference file.
To accomplish that one uses sorcery menus and augur commands.

Learning how to do it is not worth the confusion
for someone who might never use it.
But if one were to research it
then one would issue
# augur | grep cpref
# augur help cpref
And also use menus in sorcery
assist with creating cpref files.

Ever since gcc started supporting -march=native
we have not been using cpref files.
So it has been a few years.


&gt;<i> - I was also confused about Grimoire-s downloading/compiling window... What
</I>&gt;<i> are the informations appearing? Once i suspected, that nothing happens.... I
</I>&gt;<i> pushed an Enter and exited. Have I finished the recompilation successfully?
</I>
Uhm.... That is a bit difficult to understand at first.
leech downloads sources.
cast compiles and installs sources.
and dispel removes installed software.
However, all of this executes in the background.
The only time cast is foreground
is when it first starts.
It will stay foreground in order to ask questions.
After that it usually automatically invokes
# augur scry

This provides an overall view of what the sorcery tools
are currently doing.
However, if information about a single spell is desired then

# augur scry $SPELL

$SPELL is replaced with the spell name such as:

# augur scry bash

That views what is currently happening with bash.

Once a spell is being scryed then it will continue to
be scryed through download and compilation.
After the spell is no longer in the leech and cast queues
then the scry ends.

Although a SA can watch software compile using
# augur scry $SPELL
typically on a modern box scroll is so fast that
even a senior level SA's eyeballs would bounce.


&gt;<i> I think, it would be really good to see something about the way of package
</I>&gt;<i> handling in Sorcerer.
</I>
Actually, we do, sort of.  :)
I pump it each year.
Now is as good a time as any.
It's called zero install.

<A HREF="http://0install.net/">http://0install.net/</A>

Nobody seems interested in using it,
so I have not written a spell for it.
However, check out the website.
I nearly created a program like it a while ago.
Basically, it provides software
that can be installed from packages.
The software is installed at the user level
within a user's home directory instead of system wide.
For system wide installation of software
the sorcery tools are still used.

Sorcery itself can not create packages because
of the simplicity of the information it records.
Basically, information that would be required
for a package manager was excluded from sorcery.
If one wants to know why
then one must understand
the absurdity of packages and
the trouble of matching up ELF SO libraries
so that installed software has required ELF libraries also installed.
In the past package based distros handled this by providing only
backported security updates for packages that install libraries,
and in some cases for all installed software.
Consequently, those distros required a complete re-install
every year or every other year in order to acquire new software.
sorcery uses a different approach.

When installed software is updated on a Sorcerer box
and newer binary incompatible libraries are installed
then all of the installed software that requires the old libraries
is recompiled, relinked, and reinstalled
so that it becomes compatible with the new libraries.
This is detected automatically and done automatically.
It is logged as an &quot;ELF Failure&quot;
However, &quot;ELF Failures&quot; are automatically repaired by cast.

In the past this was called healing.
Since sources were already downloaded
for software that requires healing
then no additional downloads are required.
This is in sharp contrast with package managers.
A package manager would require entirely new packages
to be downloaded and installed.
The newer packages would contain software that requires
the newer ELF shared libraries.
Consequently, pre-compiled binary based distros tend
to require more downloading than a source based distro,
because source based distros can often re-use an entire
source or part of a source.

Sorcerer was never designed to be a package based distro.
It's tools were not forked from some other distro.
Sorcerer is an original just like it's sorcery tools.
Consequently, it is good at what it is supposed to do.
It is good for source based management.
And each box can heal from the pains of software updating
and grow indefinitely from past to present to future
without requiring a complete re-install every other year
as is typical with package based distros.


&gt;<i> Thanks for your help!
</I>
Sure.
We are trying to make Sorcerer more accessible
with each Install/Rescue release.
Today, I finished hacking a slightly amusing tutorial
on the use of the dialog program.
Honestly, I should have written the tutorial program years ago.
My first hint that it should exist was when a SA flamed me
when he accidentally uninstalled half of his box
for not knowing how to properly use
the software selection menu in sorcery.
He was thinking it was just for installation.
So he was removing the [*] from beside spells that were installed.
It probably tore a huge unhealable hole in his box.
Oh well.
Hopefully, the dialog tutorial run by new SAs
will help them to gain some experience
that will avoid frustration and costly mistakes.


&gt;<i> Regards, Zoltan Dekany
</I>
Thanks for some positive feedback about
the menu driven install.
Most of us, myself included,
have had our Sorcerer boxes
deployed for several years.
Consequently, the menu driven installer
tends to only gain use by SAs
who are deploying new Sorcerer boxes.
I do all the testing of the menu driven installer in qemu,
because I am too paranoid that
I could accidentally wipe a partition
on a real drive if I test the I/R without virtualization.
In 10 years I have accidentally blown away only one partition.
It was an infrequently used windoze 98 partition that
I only booted in order to run firmware updates.
But that computer is now old
so no more firmware updates.

Hopefully, you will have some fun with sorcery.
It should automatically detect CPU cores and
download, compile, and install software concurrently.
Of course this happens in the background at nice level 15
Therefore, the computer should still remain responsive
and interactive even during updates and software installation.

I do not recommend changing the runlevel in order to do updates.
Doing updates at runlevels 2 through 5 is fine.
Allowing users to continue using the box during updates is fine.
All software, except the linux kernel, is restarted automatically
as needed during updates.
Please keep that in mind if updating kde or gnome.
If a new gdm or kdm is installed
then the currently logged in kdm or gnome session will
abruptly terminate when gdm or kdm is restarted.
One can either anticipate the change,
run the update when no one is using a gnome or kde session,
or become root and hide the PID file in a subdirectory
within /var/run/
in order to prevent an inconvenient disruption during updates.

A seasoned Sorcerer SA does not stare at augur scry.  :)
Sure, even on a fast computer compiling updates requires
a few moments, especially if those updates are KDE.
Just check back a little later to see if the updates are complete
or if a problem occurred.

I tend to do compile checks
on almost all the software that
goes into the grimoire.
However, due to updates software
some software that used to compile
might start to fail compilation.
And sometimes a compile error might occur
because of the unique loadout of software on a box.
If something strange is happening
then please report it on this email list along with
as much details as possible.
Typically, when a problem is reported
then a fix will go out in the next LAG=0 grimoire.
But if it is not a high priority or a suggested fix is
not reported with the problem
then problems which are expected to be the result
of the software authors are not always fixed.
Sometimes a spell will gain the broke attribute
and then be fixed at some later date.

Sorcerer tries to make the acquisition
and installation of software
easy and practical for SAs.
However, we take no responsibility
for the fitness of installed software.
Software bugs must be reported directly to software authors.
Software installed by Sorcerer tends to be as vanilla as possible.
We do not hack other people's software.

Typically, we leave it to software authors to fix their bugs.
That is only practical since Sorcerer is the point where
3000+ software projects converge
and become available for use.
Nobody can chase after a stampede of 3000+ elephants
and barrel up their feces.

Therefore, often only small fixes to enable compilation
are provided in the Sorcerer grimoire.
This is good compromise between providing service to SAs
while not assuming the role of software developer
for projects that are sub-projects of Sorcerer.

Good luck.
Thanks again for providing
the positive feedback on the email list.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001455.html">[Sorcerer-admins] Grimoire Questions
</A></li>
	<LI>Next message: <A HREF="001457.html">[Sorcerer-admins] udev does not create sda, sdb and md0
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1456">[ date ]</a>
              <a href="thread.html#1456">[ thread ]</a>
              <a href="subject.html#1456">[ subject ]</a>
              <a href="author.html#1456">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
