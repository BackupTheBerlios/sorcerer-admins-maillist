<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] Detailed installation issues....
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2010/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20Detailed%20installation%20issues....&In-Reply-To=%3C596b75861003142300i5551d121v2b2584d510fe7fce%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001517.html">
   <LINK REL="Next"  HREF="001529.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] Detailed installation issues....</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20Detailed%20installation%20issues....&In-Reply-To=%3C596b75861003142300i5551d121v2b2584d510fe7fce%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] Detailed installation issues....">kyle.sallee at gmail.com
       </A><BR>
    <I>Mon Mar 15 07:00:11 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="001517.html">[Sorcerer-admins] Detailed installation issues....
</A></li>
        <LI>Next message: <A HREF="001529.html">[Sorcerer-admins] Detailed installation issues....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1528">[ date ]</a>
              <a href="thread.html#1528">[ thread ]</a>
              <a href="subject.html#1528">[ subject ]</a>
              <a href="author.html#1528">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Oh, thanks for the manual install guide.
So far so good.
And I also agree that the problem with sinstall
is not that it is buggy, but rather that it is written
from my perspective which makes it very easy for
me to use and probably difficult for others.
Basically, I know exactly which menus to visit.
And for a long time that worked because SAs
that tried Sorcerer were among the type that could
do a make menuconfig on the linux kernel and configure
it correctly the first or second try.
But now that Sorcerer is attempting to break ground
in the middle-experience SA level
the menu driven installer is probably the second most
confusing aspect of installing Sorcerer.
And the first would probably be setting up a network template.

I have not allocated the time yet to add to the menu driven installer
more information screens that help reassure and guide the SA
through the proper sequences of menus.
But it is something that I want to do.

Also as announced and very apparent at the moment,
the PPR is probably offline or at best not working the way
that it used to be.
Well, this is not actually bad news.
The old PPR will be retired soon.
The new PPR will replace it.
It will provide xz compressed tarballs
and xz compressed sdelta3 patches.
And it should work far better than the old PPR.

One way that the PPR will be improved will be by finally
creating a Sorcerer master source cache that updates daily
with the LAG=0 grimoire and provides rate limited downloads
as a last resort for Sorcerer boxes that are casting spells where
the software author has changed the download location for a source.
Hopefully, the Sorcerer master source cache will provide
between a 300% and 500% fill.
Therefore, in addition to making the PPR better it will also
make the PPR faster by being able to provide old and new
source tarballs to the PPR with LAN speed.  :)

Very exciting is it not?

Unfortunately, there is still a few more weeks of effort and
testing to put into creating these hosts and services.
So probably no new I/R until after the master source cache
and new PPR are deployed.

Hopefully this compromise will go good for both new SAs
and SAs with Sorcerer already deployed.
I apologize for the growing pains,
and for the lack of the PPR for a while.
I realize that for some SAs with flaky and narrow Internet
that updating will be difficult.
But when the new services are ready
they will be announced on this email list.

I am very much looking forward to it,
because Sorcerer has never had better hosting.
We owe Pekka Panula great thanks for the effort,
backing, foresight and coordination that
he is providing to make this happen.

I very much enjoy a good team effort.
Thanks goes out to everyone
who is trying to make it happen for Sorcerer SAs.  :)


On Fri, Mar 12, 2010 at 3:15 PM,  &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">bradley at northtech.us</A>&gt; wrote:
&gt;<i> Okay a detailed analysis of the installation issues were asked for. And
</I>&gt;<i> considering that there are no documents related to installing Sorcerer,
</I>&gt;<i> and the emailed docs that are now in the recent archives of this list are
</I>&gt;<i> inaccurate (in that they do not describe what really occurs in
</I>&gt;<i> chronological order, and therefore leave out so much of what happens that
</I>&gt;<i> the user does not know what to skip or when - in fact, If I read it
</I>&gt;<i> correctly, it indicated to just do the install and let Sorcerer figure out
</I>&gt;<i> on it's own how to configure /etc/fstab, format the file systems, etc...),
</I>&gt;<i> I decided to do a write up on the installation program, showing exactly
</I>&gt;<i> what happens, when, in the hopes that this might shed some light on just
</I>&gt;<i> where SAs are having issues.
</I>&gt;<i>
</I>&gt;<i> And I'm not a beginning SA either. IMO, given the current state of the
</I>&gt;<i> sinstall process, it would be better (even for a noob) to just perform the
</I>&gt;<i> fdisk, fstab, mkfs's, swapons, etc., by hand.
</I>&gt;<i>
</I>&gt;<i> We really need to fix the sinstall process so it can be understood by
</I>&gt;<i> people, IMO, and I would like to help with that process as well as develop
</I>&gt;<i> a comprehensive set of docs to make the installation, compile, and
</I>&gt;<i> configuration process straight-forward and understandable.
</I>&gt;<i>
</I>&gt;<i> This will go a long way towards the adoption of this really kewl distro :)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> -----### The Installation Process as it currently is ###-----
</I>&gt;<i>
</I>&gt;<i> Immediately after selecting the default keyboard mapping, a message is
</I>&gt;<i> displayed saying:
</I>&gt;<i>
</I>&gt;<i> &quot;rpcbind: cannot bind * on udp6: address already in use&quot;
</I>&gt;<i> &quot;rpcbind: cannot bind tcp6: address already in use&quot;
</I>&gt;<i>
</I>&gt;<i> then the screen to continue the boot process comes up. Selecting continue
</I>&gt;<i> boot displays:
</I>&gt;<i>
</I>&gt;<i> &quot;Welcome to Sorcerer.&quot;
</I>&gt;<i> &quot;Please login as root.&quot;
</I>&gt;<i> &quot;Press enter for password.&quot;
</I>&gt;<i> &quot;/sbin/sinstall
</I>&gt;<i> to begin a menu driven installation.&quot;
</I>&gt;<i>
</I>&gt;<i> Then a login prompt comes up, but before one can enter, 'root', and press
</I>&gt;<i> enter for the blank password they are disrupted by a message saying:
</I>&gt;<i>
</I>&gt;<i> &quot;Fri Mar12 11:55:16&quot;
</I>&gt;<i> &quot;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">root at hostname</A>:~# /Mar 12 11:55:18 hostname.unknown kernel: Error: Driver
</I>&gt;<i> 'pcspkr' is already registered, aborting...&quot;
</I>&gt;<i> &quot;Mar 12 11:55:18 hostname.unknown kernel: piix4_smbus 0000:00:07.0: SMBus
</I>&gt;<i> base address uninitialized - upgrade BIOS or use force_addrr=0xaddr&quot;
</I>&gt;<i>
</I>&gt;<i> At this point, if you know what's going on, you can enter root in the
</I>&gt;<i> middle of a blank field, and then you'll get the password prompt.
</I>&gt;<i>
</I>&gt;<i> When you enter the blank password, you receive a message saying:
</I>&gt;<i>
</I>&gt;<i> &quot;~bash: /: is a directory
</I>&gt;<i>
</I>&gt;<i> Fri Mar 12 12:05:47
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">root at hostname</A>:~#&quot;
</I>&gt;<i>
</I>&gt;<i> At this point, if the user is not completely confused, they can enter
</I>&gt;<i> /sbin/sinstall, and bring up the installer.
</I>&gt;<i>
</I>&gt;<i> lsmod (optional) #I do nothing
</I>&gt;<i>
</I>&gt;<i> modprobe (optional) #I do nothing
</I>&gt;<i>
</I>&gt;<i> rmmod (optional) #I do nothing
</I>&gt;<i>
</I>&gt;<i> mbr (optional) &#160;#I enter this, choose /dev/hda, and it sets the MBR
</I>&gt;<i> (presumably).
</I>&gt;<i>
</I>&gt;<i> partition (optional) #I enter this, and create a /dev/hda1 of about
</I>&gt;<i> 18GBytes (18431.86), set it bootable, create a /dev/hda2 of about 3GBytes
</I>&gt;<i> (3042.91), out of a total of 20GB, set its type to '83', write the new
</I>&gt;<i> partition table, and exit.
</I>&gt;<i>
</I>&gt;<i> (That's actually the display from cfdisk, which I don't use. I use fdisk,
</I>&gt;<i> because I'm more comfortable with it, so the actual report is:
</I>&gt;<i>
</I>&gt;<i> /dev/hda1 &#160; &#160; &#160; * &#160; &#160; &#160; 1 &#160; &#160; &#160; 35714 &#160; 17999824+ &#160; &#160; &#160; 83 &#160; &#160; &#160;Linux
</I>&gt;<i> /dev/hda2 &#160; &#160; &#160; &#160; &#160; &#160; &#160; 35715 &#160; 41610 &#160; 2971584 &#160; &#160; &#160; &#160; 82 &#160; &#160; &#160;Linux swap / Solaris
</I>&gt;<i>
</I>&gt;<i> At this point, the installer reports that both the 'mbr' and 'partition'
</I>&gt;<i> sections are &quot;complete&quot;, so I move on to &quot;modify_fstab (required)&quot;.
</I>&gt;<i>
</I>&gt;<i> The user is presented with a rather confusing menu that displays the
</I>&gt;<i> following:
</I>&gt;<i>
</I>&gt;<i> device &#160; &#160; &#160; &#160; &#160;mount filesys option d o
</I>&gt;<i> /dev/hda1 &#160; &#160; &#160; none unknown defauults, natime 0 0
</I>&gt;<i> /dev/hda2 &#160; &#160; &#160; none unknown defaults, natime 0 0
</I>&gt;<i> /swap &#160; &#160; &#160; &#160; &#160; none swap defaults 0 0
</I>&gt;<i>
</I>&gt;<i> Now, I don't really have a problem with /etc/fstab, but getting through
</I>&gt;<i> this section is totally confusing.
</I>&gt;<i>
</I>&gt;<i> I'll go through these one by one, saving &quot;device&quot; for last, since it is
</I>&gt;<i> the weirdest.
</I>&gt;<i>
</I>&gt;<i> /dev/hda1:
</I>&gt;<i>
</I>&gt;<i> Device &#160;/dev/hda1
</I>&gt;<i> Mount &#160; /
</I>&gt;<i> Filesystem &#160; &#160; &#160;ext4
</I>&gt;<i> Options &#160; &#160; &#160; &#160; defaults,noatime
</I>&gt;<i> Dump &#160; &#160; &#160; &#160; &#160; &#160;0
</I>&gt;<i> Order &#160; &#160; &#160; &#160; &#160; 0
</I>&gt;<i> Feature &#160; &#160; &#160; &#160; -0 dir_index,filetype,sparse_super
</I>&gt;<i> Check
</I>&gt;<i> Encryption
</I>&gt;<i> Empty &#160; &#160; &#160; &#160; &#160; All fields removing entry
</I>&gt;<i>
</I>&gt;<i> Basically, all I did was set the mount point to &quot;/&quot;, and chose the &quot;ext4&quot;
</I>&gt;<i> filesystem (which is the default). Everything else looks good to me.
</I>&gt;<i>
</I>&gt;<i> Now on to the next partition, /dev/hda2, which I have designated as a 3GB
</I>&gt;<i> Swap partition, since this is a source based distro that needs a lot of
</I>&gt;<i> virtual memory for compile time.
</I>&gt;<i>
</I>&gt;<i> Device &#160;/dev/hda2
</I>&gt;<i> Mount &#160; /
</I>&gt;<i> Filesystem &#160; &#160; &#160;ext4
</I>&gt;<i> Options &#160; &#160; &#160; &#160; defaults,noatime
</I>&gt;<i> Dump &#160; &#160; &#160; &#160; &#160; &#160;0
</I>&gt;<i> Order &#160; &#160; &#160; &#160; &#160; 0
</I>&gt;<i> Feature &#160; &#160; &#160; &#160; -0 dir_index,filetype,sparse_super
</I>&gt;<i> Check
</I>&gt;<i> Encryption
</I>&gt;<i> Empty &#160; &#160; &#160; &#160; &#160; All fields removing entry
</I>&gt;<i>
</I>&gt;<i> At this point, I do something wrong and the /dev/hda2 entry disappears, I
</I>&gt;<i> try to edit the /swap entry and it disappears too, then I try to check out
</I>&gt;<i> the device entry and something unintelligible flashes by the screen to
</I>&gt;<i> fast to tell what it says, I'm told that something didn't get completed,
</I>&gt;<i> and since I can't seem to put back the /dev/hda2 entry to give myself a
</I>&gt;<i> big swap disk, I move on...
</I>&gt;<i>
</I>&gt;<i> Since I know that something has gone bad wrong, I checkout the entry
</I>&gt;<i> entitled, &quot;reload fstab&quot;. That seems to put everything back to the way it
</I>&gt;<i> originally was, so I go back and do the fstab again:
</I>&gt;<i>
</I>&gt;<i> So I enter the /dev/hda2 again and set the mount point to /swap. Then I
</I>&gt;<i> set the filesystem to swap, when I come out of that screen, it says my
</I>&gt;<i> mount point is none, but that the filesystem is swap.
</I>&gt;<i>
</I>&gt;<i> I figure that for some reason, the installer system must be correct so I
</I>&gt;<i> move ahead...
</I>&gt;<i>
</I>&gt;<i> I enter the /swap selection on the screen that I had no understanding as
</I>&gt;<i> to why it existed in the first place (Interestingly enough, it said that
</I>&gt;<i> the swap size was only 256MBytes), select &quot;Device&quot;, then edit nothing
</I>&gt;<i> because something flashes across the screen and the menu appears again. I
</I>&gt;<i> &quot;Done&quot; exit back to the main fstab menu but before I get there it says
</I>&gt;<i>
</I>&gt;<i> &quot;Essential fields are missing, Emptying entry.&quot;
</I>&gt;<i>
</I>&gt;<i> It throws me completely out of the fstab edit sub-menu and back to the
</I>&gt;<i> installer. So I go back into the edit fstab sub-menu and this looks about
</I>&gt;<i> as good now to me now as it's going to (I've gone through this several
</I>&gt;<i> times - there are no docs to help out here.
</I>&gt;<i>
</I>&gt;<i> It shows:
</I>&gt;<i>
</I>&gt;<i> device &#160; &#160; &#160; &#160; &#160;mount filesys options d o
</I>&gt;<i> /dev/hda1 &#160; &#160; &#160; / ext4 defaults,noatime 0 0
</I>&gt;<i> /dev/hda2 &#160; &#160; &#160; none swap default 0 0
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> So, since I haven't been into the &quot;device&quot; entry yet, I do so:
</I>&gt;<i>
</I>&gt;<i> hm... Okay now, it says, &quot;Please visit every menu item except the Empty
</I>&gt;<i> All Fields&quot;. So I will, but first, the display looks like this before I
</I>&gt;<i> edit it:
</I>&gt;<i>
</I>&gt;<i> Device
</I>&gt;<i> Mount
</I>&gt;<i> Filesystem &#160; &#160; &#160;swap
</I>&gt;<i> Options
</I>&gt;<i> Dump
</I>&gt;<i> Order
</I>&gt;<i> Size
</I>&gt;<i> Check
</I>&gt;<i> Empty &#160; &#160; &#160; &#160; &#160; All fields removing entry
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Note that there is a &quot;Size field instead of a feature field, and the
</I>&gt;<i> &quot;Encryption&quot; field is not there.
</I>&gt;<i>
</I>&gt;<i> First, I go into &quot;Device&quot;, and something unintelligible flashes across the
</I>&gt;<i> screen.
</I>&gt;<i>
</I>&gt;<i> Next, I go into &quot;Mount&quot; I enter /swap, but when exiting, it says &quot;none&quot;.
</I>&gt;<i>
</I>&gt;<i> But it now says the following, which looks as good as I can get it (sine
</I>&gt;<i> it won't let me put /dev/hda2 into &quot;Device&quot;, and won't let me enter the
</I>&gt;<i> mount point of &quot;/swap&quot; either). So I make one more adjustment (to &quot;Size&quot;)
</I>&gt;<i> before moving on, noting the new settings below before doing so:
</I>&gt;<i>
</I>&gt;<i> Device
</I>&gt;<i> Mount &#160; &#160; &#160; &#160; &#160; none
</I>&gt;<i> Filesystem &#160; &#160; &#160;swap
</I>&gt;<i> Options &#160; &#160; &#160; &#160; default
</I>&gt;<i> Dump &#160; &#160; &#160; &#160; &#160; &#160;0
</I>&gt;<i> Order &#160; &#160; &#160; &#160; &#160; 0
</I>&gt;<i> Size &#160; &#160; &#160; &#160; &#160; &#160;3042 #(because, according to cfdisk, /dev/hda2 is 3042.91)
</I>&gt;<i> Feature &#160; &#160; &#160; &#160; -0 dir_index,filetype,sparse_super
</I>&gt;<i> Check
</I>&gt;<i> Empty &#160; &#160; &#160; &#160; &#160; All fields removing entry
</I>&gt;<i>
</I>&gt;<i> &quot;Essential fields are missing, Emptying entry.&quot;, is the message I get at
</I>&gt;<i> this point, which I find interesting, so I go back into &quot;modify_fstab&quot;
</I>&gt;<i> from the main install menu to take a look:
</I>&gt;<i>
</I>&gt;<i> It shows:
</I>&gt;<i>
</I>&gt;<i> device &#160; &#160; &#160; &#160; &#160;mount filesys options d o
</I>&gt;<i> /dev/hda1 &#160; &#160; &#160; / ext4 defaults,noatime 0 0
</I>&gt;<i> /dev/hda2 &#160; &#160; &#160; none swap default 0 0
</I>&gt;<i>
</I>&gt;<i> hm... I would prefer if that &quot;device&quot; entry wasn't there, since I don't
</I>&gt;<i> know what that is, but the other two entries look really good. Let's move
</I>&gt;<i> on...
</I>&gt;<i>
</I>&gt;<i> modify_fstab is showing as (complete)
</I>&gt;<i>
</I>&gt;<i> Since there aren't ANY installation docs (Which I'm considering writing as
</I>&gt;<i> a manual, BTW) the next two entries are &quot;init_filesys (optional)&quot;, and
</I>&gt;<i> &quot;mount (required)&quot;.
</I>&gt;<i>
</I>&gt;<i> Now, I know you can't mount &#160;before &quot;mkfs -t...&quot;, so I choose
</I>&gt;<i> &quot;init_filesys&quot; - even though it says &quot;optional&quot; - BECAUSE IT IS NOT
</I>&gt;<i> OPTIONAL - You MUST format the partition in real life before you can mount
</I>&gt;<i> and copy files over....
</I>&gt;<i>
</I>&gt;<i> The screen says:
</I>&gt;<i> &quot;[ ] /dev/hda1 &#160; &#160; &#160; &#160; &#160;/ ext4 defaults,noatime 0 0&quot;
</I>&gt;<i> &quot;[ ] /dev/hda2 &#160; &#160; &#160; &#160; &#160;none swap default 0 0&quot;
</I>&gt;<i>
</I>&gt;<i> Hey this looks good, actually, maybe I did it right this time! so I select
</I>&gt;<i> both and wait while the (presumably) mkfs -t ext4, mkswap, swapon, etc.,
</I>&gt;<i> whatever... goes through its process....
</I>&gt;<i>
</I>&gt;<i> &quot;[*] /dev/hda1 &#160; &#160; &#160; &#160; &#160;/ ext4 defaults,noatime 0 0&quot;
</I>&gt;<i> &quot;[*] /dev/hda2 &#160; &#160; &#160; &#160; &#160;none swap default 0 0&quot;
</I>&gt;<i>
</I>&gt;<i> It asks me to confirm that all data will be lost. Sure, no prob!
</I>&gt;<i>
</I>&gt;<i> &quot;mkfs.ext4 -0 dir_index.filetype,sparse_super /dev/hda1&quot; appears to be the
</I>&gt;<i> command it's going to run. Looks good to me, so I select &quot;Yes&quot;.
</I>&gt;<i>
</I>&gt;<i> &quot;writing inode tables: x/130&quot;...
</I>&gt;<i> &quot;creating journal (32768 blocks):&quot;...
</I>&gt;<i> &quot;Writing superblocks and filesystem accounting information: done&quot;...
</I>&gt;<i>
</I>&gt;<i> And then it takes the user back to a screen that says:
</I>&gt;<i>
</I>&gt;<i> &quot;ext4 successfully created on /dev/hda1&quot;. I select &quot;OK&quot; and...
</I>&gt;<i>
</I>&gt;<i> &quot;Please confirm it is okay that all data on /dev/hda2 is lost?&quot; I choose
</I>&gt;<i> &quot;Yes&quot;...
</I>&gt;<i>
</I>&gt;<i> Now it says, &quot;mkswap /dev/hda2&quot;. I choose &quot;Yes&quot;...
</I>&gt;<i>
</I>&gt;<i> &quot;swap successfully created on /dev/hda2&quot;. I &#160;am about to choose &quot;OK&quot;, but
</I>&gt;<i> then the mount and install takes place and it always bombs on the
</I>&gt;<i> installation of files.
</I>&gt;<i>
</I>&gt;<i> How does everything look so far? Did I do everything correctly? I've done
</I>&gt;<i> a lot of installing over the years, From MCC and SLS, and Yggdrasil LGX,
</I>&gt;<i> to many years of manually setting up fdisk and fstab with Slackware, but
</I>&gt;<i> this was really confusing for me.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Sorcerer-admins mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">Sorcerer-admins at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">https://lists.berlios.de/mailman/listinfo/sorcerer-admins</A>
</I>&gt;<i>
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001517.html">[Sorcerer-admins] Detailed installation issues....
</A></li>
	<LI>Next message: <A HREF="001529.html">[Sorcerer-admins] Detailed installation issues....
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1528">[ date ]</a>
              <a href="thread.html#1528">[ thread ]</a>
              <a href="subject.html#1528">[ subject ]</a>
              <a href="author.html#1528">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
