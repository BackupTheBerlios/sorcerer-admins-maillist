<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Sorcerer-admins] networks
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/sorcerer-admins/2008/index.html" >
   <LINK REL="made" HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20networks&In-Reply-To=%3C596b75860809251548t16054c56vd22b5ca3cfce5b61%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000788.html">
   <LINK REL="Next"  HREF="000790.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Sorcerer-admins] networks</H1>
    <B>Kyle Sallee</B> 
    <A HREF="mailto:sorcerer-admins%40lists.berlios.de?Subject=Re%3A%20%5BSorcerer-admins%5D%20networks&In-Reply-To=%3C596b75860809251548t16054c56vd22b5ca3cfce5b61%40mail.gmail.com%3E"
       TITLE="[Sorcerer-admins] networks">kyle.sallee at gmail.com
       </A><BR>
    <I>Fri Sep 26 00:48:45 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000788.html">[Sorcerer-admins] networks
</A></li>
        <LI>Next message: <A HREF="000790.html">[Sorcerer-admins] Source cache and Repository howto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#789">[ date ]</a>
              <a href="thread.html#789">[ thread ]</a>
              <a href="subject.html#789">[ subject ]</a>
              <a href="author.html#789">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Thanks for the vote of confidence.
Obviously, after being discussed some time before also
with Jan and others a solution should have been implemented before now.
Although there is no definite correct choice.
I want to show the decision evaluation for this choice.

+ /etc/init.d/networks remains the same simple script.
+ only templates that require extra complexity to control start receive it.
+ The checks in templates SAs can modified to do whatever is required
    while a check hardcoded into /etc/init.d/networks might not be satisfactory
    for all boxes.
+ SAs do not have to know if net works should be started during sysinit
   or during runlevel.  Only the template authors need to know that.

- A few network types start a little slower due to checking for one directory
  and running one &quot;touch&quot; executable which will not exist during sysinit
  when sysinit is running from initramfs.

The solution omits certain considerations and functionality,
but yet it should be adequate for the immediate task of controlling
when certain types of networks start.
Likewise, as more control is required in the future
the proper solution again will probably be to improve
the network templates.

Perhaps they also should be granted a common framework
similar to what init-scripts have from init-functions?
Definitely the code common to many network templates is appearing.
Factorizing that code could lead to more simple to read,
understand and modify network templates that do a more complete job.
It would seem like the next logical step progressing towards
more effective and easier to configure networking for Sorcerer, yes?



On Thu, Sep 25, 2008 at 4:13 AM, evert vorster &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">evorster at gmail.com</A>&gt; wrote:
&gt;<i> I like this, and will test as soon as I reboot my box.
</I>&gt;<i>
</I>&gt;<i> Thanks for the quick solution!
</I>&gt;<i>
</I>&gt;<i> -Evert-
</I>&gt;<i>
</I>&gt;<i> On Thu, Sep 25, 2008 at 6:32 AM, Kyle Sallee &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">kyle.sallee at gmail.com</A>&gt; wrote:
</I>&gt;&gt;<i> Previous reports indicate that networks configured automatically by
</I>&gt;&gt;<i> dhcpcd, dhclient and wpa_supplicant should not be started during sysinit,
</I>&gt;&gt;<i> because they might not work as expected.
</I>&gt;&gt;<i> Consequently, the networking templates provided by the networks spell
</I>&gt;&gt;<i> for those templates have a modified start function that begin with:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> start(){
</I>&gt;&gt;<i>  if ! [[ -d /opt ]]; then return 1; fi
</I>&gt;&gt;<i>  if ! touch /etc/resolv.conf 2&gt;/dev/null; then return 1; fi
</I>
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000788.html">[Sorcerer-admins] networks
</A></li>
	<LI>Next message: <A HREF="000790.html">[Sorcerer-admins] Source cache and Repository howto
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#789">[ date ]</a>
              <a href="thread.html#789">[ thread ]</a>
              <a href="subject.html#789">[ subject ]</a>
              <a href="author.html#789">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/sorcerer-admins">More information about the Sorcerer-admins
mailing list</a><br>
</body></html>
